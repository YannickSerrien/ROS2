<?xml version="1.0"?>
<!--
Macros file: Reusable components
-->
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- Inertia Macros -->

  <!-- Box inertia -->
  <xacro:macro name="box_inertia" params="m x y z">
    <inertial>
      <mass value="${m}"/>
      <inertia ixx="${m * (y*y + z*z) / 12}" ixy="0" ixz="0"
               iyy="${m * (x*x + z*z) / 12}" iyz="0"
               izz="${m * (x*x + y*y) / 12}"/>
    </inertial>
  </xacro:macro>

  <!-- Cylinder inertia -->
  <xacro:macro name="cylinder_inertia" params="m r h">
    <inertial>
      <mass value="${m}"/>
      <inertia ixx="${m * (3*r*r + h*h) / 12}" ixy="0" ixz="0"
               iyy="${m * (3*r*r + h*h) / 12}" iyz="0"
               izz="${m * r * r / 2}"/>
    </inertial>
  </xacro:macro>

  <!-- Sphere inertia -->
  <xacro:macro name="sphere_inertia" params="m r">
    <inertial>
      <mass value="${m}"/>
      <inertia ixx="${2 * m * r * r / 5}" ixy="0" ixz="0"
               iyy="${2 * m * r * r / 5}" iyz="0"
               izz="${2 * m * r * r / 5}"/>
    </inertial>
  </xacro:macro>

  <!-- Wheel Macro -->
  <xacro:macro name="wheel" params="prefix reflect">

    <!-- Wheel Link -->
    <link name="${prefix}_wheel">
      <visual>
        <origin xyz="0 0 0" rpy="${pi/2} 0 0"/>
        <geometry>
          <cylinder radius="${wheel_radius}" length="${wheel_width}"/>
        </geometry>
        <material name="wheel_black">
          <color rgba="${wheel_black}"/>
        </material>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="${pi/2} 0 0"/>
        <geometry>
          <cylinder radius="${wheel_radius}" length="${wheel_width}"/>
        </geometry>
      </collision>

      <xacro:cylinder_inertia m="${wheel_mass}" r="${wheel_radius}" h="${wheel_width}"/>
    </link>

    <!-- Wheel Joint -->
    <joint name="${prefix}_wheel_joint" type="continuous">
      <parent link="base_link"/>
      <child link="${prefix}_wheel"/>
      <origin xyz="0 ${reflect * wheel_separation / 2} 0" rpy="0 0 0"/>
      <axis xyz="0 1 0"/>
    </joint>

  </xacro:macro>

</robot>
